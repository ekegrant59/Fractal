<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fund your account - Fractal Equities</title>
    <%- include('partials/headlinks') %>
</head>
<body>
    <%- include('partials/usernav') %>
     <main class="ps-4 ps-md-5 pe-4 px-lg-5 content py-3" data-bs-theme="dark">
        <div class="ps-md-2">
            <h1 class="font-poppins fw-semibold">COMING SOON.....</h1>
        </div>
        <!-- <div class="ps-md-2">
            <div class="">
                <div class="text-center mb-4">
                    <select id="crypto-select" class="form-select w-100 mx-auto" style="max-width: 400px;">
                        <option value="">Select Cryptocurrency</option>
                        <% cryptoList.forEach(crypto => { %>
                            <option value="<%= crypto.id %>" <%= crypto.id === defaultCrypto.id ? 'selected' : '' %>><%= crypto.name %></option>
                          <% }) %>
                    </select>
                </div>

                <div class="row">
                    <div class="col-lg-8 mb-4">
                        <div id="chartPlaceholder" class="card h-100">
                            <div class="card-body d-flex align-items-center justify-content-center">
                                <canvas id="price-chart" class="h-100 w-100"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-body">
                                <h2 class="card-title mb-4">Place Trades</h2>
                                <form id="tradeForm">
                                    <div class="mb-3">
                                        <label for="amount" class="form-label">Amount</label>
                                        <input type="number" id="amount" class="form-control" required>
                                        <small class="form-text text-muted">Available: $<span id="availableBalance"><%= user1.balance %></span></small>
                                    </div>
                                    <div class="mb-3">
                                        <label for="price" class="form-label">Price</label>
                                        <input type="text" id="price" class="form-control" required readonly value="$ <%= defaultCrypto.price %>">
                                    </div>
                                    <div class="mb-3">
                                        <label for="leverage" class="form-label">Leverage: <span id="leverageValue">1</span>x</label>
                                        <input type="range" class="form-range" id="leverage" min="1" max="50" value="1">
                                    </div>
                                    <div class="d-flex justify-content-around">
                                        <button type="button" onclick="placeOrder('buy')" class="btn btn-success btn-lg">Buy</button>
                                        <button type="button" onclick="placeOrder('sell')" class="btn btn-danger btn-lg">Sell</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
        
                <div class="card mb-4">
                    <div class="card-body d-flex justify-content-between">
                        <div>
                            <strong>Available Balance:</strong> $<span id="availableBalanceSum">10000</span>
                        </div>
                        <div>
                            <strong>Total Margin:</strong> $<span id="totalMargin">0</span>
                        </div>
                        <div>
                            <strong>Total PNL:</strong> $<span id="totalPNL">0</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h2 class="card-title mb-4">Open Trades</h2>
                        <div class="table-responsive">
                            <table id="tradesTable" class="table table-dark table-striped">
                                <thead>
                                    <tr>
                                        <th>Crypto</th>
                                        <th>Amount</th>
                                        <th>Entry Price</th>
                                        <th>Date</th>
                                        <th>PNL</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                   
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
    </main>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <script>
        
        const leverageSlider = document.getElementById('leverage');
        const leverageValue = document.getElementById('leverageValue');

        leverageSlider.addEventListener('input', function() {
            leverageValue.textContent = this.value;
        });

        function formatNumber(num) {
            if (Number.isInteger(num)) {
                return num.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
            } else {
                return num.toLocaleString('en-US');
            }
        }


    let userbalance = Number("<%= user1.balance %>")

    document.getElementById('availableBalance').innerHTML = formatNumber(userbalance)
    document.getElementById('availableBalanceSum').innerHTML = formatNumber(userbalance)

    </script>

    
</body>
</html>